# åŒ»ç–—ç”¨å“é”€å”®ç³»ç»Ÿ (Medication Sales System)

> åŸºäº Spring Boot 3.4 + MyBatis çš„ç°ä»£åŒ–åŒ»è¯ç”µå•†å¹³å°

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„**åŒ»è¯ç”µå•†å¹³å°åç«¯ç³»ç»Ÿ**ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›å®Œæ•´çš„å•†å“ç®¡ç†ã€è´­ç‰©è½¦ã€è®¢å•å¤„ç†ã€ç”¨æˆ·è®¤è¯ç­‰åŠŸèƒ½ã€‚ç³»ç»Ÿæ”¯æŒæ™®é€šç”¨æˆ·è´­è¯å’Œç®¡ç†å‘˜åå°ç®¡ç†ä¸¤ç§è§’è‰²ï¼Œå®ç°äº†ä»å•†å“æµè§ˆåˆ°è®¢å•å®Œæˆçš„å®Œæ•´ä¸šåŠ¡æµç¨‹ã€‚

### æ ¸å¿ƒä¸šåŠ¡æµç¨‹

```
ç”¨æˆ·æ³¨å†Œ/ç™»å½• â†’ æµè§ˆè¯å“ â†’ æ·»åŠ è´­ç‰©è½¦ â†’ æäº¤è®¢å• â†’ æ”¯ä»˜ â†’ å‘è´§ â†’ æ”¶è´§ç¡®è®¤ â†’ è¯„ä»·
```

## âœ¨ ä¸»è¦åŠŸèƒ½

### ç”¨æˆ·ç«¯åŠŸèƒ½
- **ç”¨æˆ·ç®¡ç†**ï¼šæ³¨å†Œã€ç™»å½•ã€ä¸ªäººèµ„æ–™ç®¡ç†
- **å•†å“æµè§ˆ**ï¼šåˆ†ç±»æµè§ˆã€å…³é”®è¯æœç´¢ã€ä»·æ ¼ç­›é€‰ã€å¤„æ–¹è¯ç­›é€‰
- **è´­ç‰©è½¦**ï¼šæ·»åŠ å•†å“ã€ä¿®æ”¹æ•°é‡ã€åˆ é™¤å•†å“ã€æ¸…ç©ºè´­ç‰©è½¦
- **è®¢å•ç®¡ç†**ï¼šä¸‹å•ã€æ”¯ä»˜ã€å–æ¶ˆè®¢å•ã€æŸ¥çœ‹è®¢å•è¯¦æƒ…ã€ç¡®è®¤æ”¶è´§
- **å•†å“è¯„ä»·**ï¼šè®¢å•å®Œæˆåè¯„ä»·å•†å“ã€æŸ¥çœ‹å•†å“è¯„ä»·

### ç®¡ç†ç«¯åŠŸèƒ½
- **è¯å“ç®¡ç†**ï¼šæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ã€ä¸Šä¸‹æ¶è¯å“
- **è®¢å•ç®¡ç†**ï¼šæŸ¥çœ‹æ‰€æœ‰è®¢å•ã€è®¢å•å‘è´§ã€è®¢å•ç»Ÿè®¡
- **åˆ†ç±»ç®¡ç†**ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å•†å“åˆ†ç±»
- **è½®æ’­ç®¡ç†**ï¼šé¦–é¡µè½®æ’­å›¾ç®¡ç†
- **ç”¨æˆ·ç®¡ç†**ï¼šæŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ã€ç”¨æˆ·çŠ¶æ€ç®¡ç†

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯åº”ç”¨       â”‚      â”‚   Spring Boot åç«¯   â”‚      â”‚   MySQL     â”‚
â”‚   (ä»»æ„å‰ç«¯)     â”‚â—„â”€â”€â”€â”€â–ºâ”‚   RESTful API        â”‚â—„â”€â”€â”€â”€â–ºâ”‚   æ•°æ®åº“    â”‚
â”‚                 â”‚ HTTP â”‚   + JWTè®¤è¯          â”‚ JDBC â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### åç«¯æ¡†æ¶
- **Spring Boot 3.4.12** - æ ¸å¿ƒæ¡†æ¶
- **MyBatis 3.0.5** - ORM æŒä¹…å±‚æ¡†æ¶
- **Spring Security Crypto** - å¯†ç åŠ å¯†
- **Spring Validation** - æ•°æ®éªŒè¯

#### æ•°æ®åº“
- **MySQL 8.0+** - å…³ç³»å‹æ•°æ®åº“

#### è®¤è¯æˆæƒ
- **JWT (JJWT 0.12.5)** - åŸºäºä»¤ç‰Œçš„è®¤è¯
- **BCrypt** - å¯†ç å“ˆå¸Œç®—æ³•

#### APIæ–‡æ¡£
- **SpringDoc OpenAPI 2.8.5** - Swagger UI æ–‡æ¡£

#### å·¥å…·åº“
- **Apache Commons Lang 3.12.0** - å·¥å…·ç±»åº“
- **Lombok** - ä»£ç ç®€åŒ–ï¼ˆå¯é€‰ï¼‰

#### æ„å»ºå·¥å…·
- **Maven** - é¡¹ç›®ç®¡ç†å’Œæ„å»º
- **Java 17** - JDK ç‰ˆæœ¬

## ğŸ“ é¡¹ç›®ç»“æ„

```
Web_MedicationSalesSystem/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/neusoft/coursemgr/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                      # è®¤è¯æˆæƒæ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ JwtUtil.java           # JWTå·¥å…·ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthInterceptor.java   # è®¤è¯æ‹¦æˆªå™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthContext.java       # ç”¨æˆ·ä¸Šä¸‹æ–‡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AdminGuard.java        # æƒé™å®ˆå«
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/                # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserController.java    # ç”¨æˆ·æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductController.java # å•†å“æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CartController.java    # è´­ç‰©è½¦æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderController.java   # è®¢å•æ¥å£
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Admin*.java            # ç®¡ç†ç«¯æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ service/                   # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ impl/                  # ä¸šåŠ¡å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ mapper/                    # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/                    # å®ä½“ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ config/                    # é…ç½®ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ exception/                 # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ common/                    # é€šç”¨å·¥å…·
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml            # åº”ç”¨é…ç½®
â”‚   â”‚       â””â”€â”€ mapper/                    # MyBatis XMLæ˜ å°„
â”‚   â””â”€â”€ test/                              # å•å…ƒæµ‹è¯•
â”œâ”€â”€ uploads/                               # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”œâ”€â”€ pom.xml                                # Mavené…ç½®
â””â”€â”€ README.md                              # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **JDK 17+**
- **MySQL 8.0+**
- **Maven 3.6+**

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/Web_MedicationSalesSystem.git
cd Web_MedicationSalesSystem
```

#### 2. åˆ›å»ºæ•°æ®åº“

```sql
CREATE DATABASE medicine_sales CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

#### 3. å¯¼å…¥æ•°æ®è¡¨

æ‰§è¡Œé¡¹ç›®ä¸­çš„ SQL è„šæœ¬åˆ›å»ºæ•°æ®è¡¨ï¼ˆå¦‚æœæä¾›ï¼‰ã€‚ä¸»è¦æ•°æ®è¡¨åŒ…æ‹¬ï¼š

- `user_table` - ç”¨æˆ·è¡¨
- `product_table` - è¯å“è¡¨
- `category_table` - åˆ†ç±»è¡¨
- `order_table` - è®¢å•è¡¨
- `order_item_table` - è®¢å•æ˜ç»†è¡¨
- `cart_table` - è´­ç‰©è½¦è¡¨
- `cart_item_table` - è´­ç‰©è½¦æ¡ç›®è¡¨
- `review_table` - è¯„ä»·è¡¨
- `banner_table` - è½®æ’­è¡¨
- `file_record_table` - æ–‡ä»¶è®°å½•è¡¨

#### 4. ä¿®æ”¹é…ç½®æ–‡ä»¶

ç¼–è¾‘ `src/main/resources/application.yml`ï¼š

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/medicine_sales?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root           # ä¿®æ”¹ä¸ºä½ çš„æ•°æ®åº“ç”¨æˆ·å
    password: your_password  # ä¿®æ”¹ä¸ºä½ çš„æ•°æ®åº“å¯†ç 

jwt:
  secret: "your_secret_key_at_least_32_characters_long"  # ä¿®æ”¹ä¸ºä½ çš„å¯†é’¥
  expire-seconds: 86400  # Tokenè¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
```

#### 5. ç¼–è¯‘å¹¶è¿è¡Œ

```bash
# ä½¿ç”¨ Maven ç¼–è¯‘
mvn clean package

# è¿è¡Œåº”ç”¨
mvn spring-boot:run

# æˆ–ç›´æ¥è¿è¡Œ JAR æ–‡ä»¶
java -jar target/course-mgr-0.0.1-SNAPSHOT.jar
```

#### 6. è®¿é—®åº”ç”¨

- **API åŸºç¡€åœ°å€**: http://localhost:8080
- **Swagger æ–‡æ¡£**: http://localhost:8080/swagger-ui.html
- **OpenAPI æ–‡æ¡£**: http://localhost:8080/v3/api-docs

## ğŸ“– API æ–‡æ¡£

### ç»Ÿä¸€å“åº”æ ¼å¼

æ‰€æœ‰ API å“åº”å‡é‡‡ç”¨ç»Ÿä¸€çš„ JSON æ ¼å¼ï¼š

**æˆåŠŸå“åº”**ï¼š
```json
{
  "success": true,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    // è¿”å›çš„æ•°æ®
  }
}
```

**å¤±è´¥å“åº”**ï¼š
```json
{
  "success": false,
  "message": "é”™è¯¯ä¿¡æ¯",
  "data": null
}
```

### ä¸»è¦ API ç«¯ç‚¹

#### ç”¨æˆ·ç›¸å…³
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|----------|
| POST | `/api/users/register` | ç”¨æˆ·æ³¨å†Œ | âŒ |
| POST | `/api/users/login` | ç”¨æˆ·ç™»å½• | âŒ |
| GET | `/api/users/profile` | è·å–ä¸ªäººä¿¡æ¯ | âœ… |
| PUT | `/api/users/profile` | æ›´æ–°ä¸ªäººä¿¡æ¯ | âœ… |

#### å•†å“ç›¸å…³
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|----------|
| GET | `/api/products` | è·å–å•†å“åˆ—è¡¨ | âŒ |
| GET | `/api/products/{id}` | è·å–å•†å“è¯¦æƒ… | âŒ |
| GET | `/api/categories` | è·å–åˆ†ç±»åˆ—è¡¨ | âŒ |

#### è´­ç‰©è½¦ç›¸å…³
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|----------|
| GET | `/api/cart` | æŸ¥çœ‹è´­ç‰©è½¦ | âœ… |
| POST | `/api/cart/items` | æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦ | âœ… |
| PUT | `/api/cart/items/{id}` | ä¿®æ”¹è´­ç‰©è½¦å•†å“æ•°é‡ | âœ… |
| DELETE | `/api/cart/items/{id}` | åˆ é™¤è´­ç‰©è½¦å•†å“ | âœ… |
| DELETE | `/api/cart/clear` | æ¸…ç©ºè´­ç‰©è½¦ | âœ… |

#### è®¢å•ç›¸å…³
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|----------|
| POST | `/api/orders` | åˆ›å»ºè®¢å• | âœ… |
| GET | `/api/orders` | æˆ‘çš„è®¢å•åˆ—è¡¨ | âœ… |
| GET | `/api/orders/{id}` | è®¢å•è¯¦æƒ… | âœ… |
| PUT | `/api/orders/{id}/pay` | æ”¯ä»˜è®¢å• | âœ… |
| PUT | `/api/orders/{id}/cancel` | å–æ¶ˆè®¢å• | âœ… |
| PUT | `/api/orders/{id}/receive` | ç¡®è®¤æ”¶è´§ | âœ… |

#### ç®¡ç†ç«¯ API
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦ç®¡ç†å‘˜ |
|------|------|------|-----------|
| POST | `/api/admin/products` | æ·»åŠ è¯å“ | âœ… |
| PUT | `/api/admin/products/{id}` | ç¼–è¾‘è¯å“ | âœ… |
| DELETE | `/api/admin/products/{id}` | åˆ é™¤è¯å“ | âœ… |
| GET | `/api/admin/orders` | æ‰€æœ‰è®¢å•åˆ—è¡¨ | âœ… |
| PUT | `/api/admin/orders/{id}/ship` | è®¢å•å‘è´§ | âœ… |

### è®¤è¯æ–¹å¼

æ‰€æœ‰éœ€è¦è®¤è¯çš„ API éƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ JWT Tokenï¼š

```http
Authorization: Bearer <your_jwt_token>
```

**ç™»å½•ç¤ºä¾‹**ï¼š

```bash
curl -X POST http://localhost:8080/api/users/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "user123",
    "password": "password123"
  }'
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "userId": 1,
    "username": "user123",
    "role": "USER"
  }
}
```

**ä½¿ç”¨ Token è®¿é—®å—ä¿æŠ¤çš„ API**ï¼š

```bash
curl -X GET http://localhost:8080/api/cart \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

## ğŸ” è®¤è¯å’Œæˆæƒ

### ç”¨æˆ·è§’è‰²

ç³»ç»Ÿæ”¯æŒä¸¤ç§è§’è‰²ï¼š

- **USER** - æ™®é€šç”¨æˆ·ï¼Œå¯ä»¥æµè§ˆå•†å“ã€ç®¡ç†è´­ç‰©è½¦ã€ä¸‹å•ç­‰
- **ADMIN** - ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™ï¼Œå¯ä»¥ç®¡ç†å•†å“ã€è®¢å•ã€ç”¨æˆ·ç­‰

### JWT è®¤è¯æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®¢æˆ·ç«¯  â”‚                â”‚  æœåŠ¡ç«¯  â”‚                â”‚  æ•°æ®åº“  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚                           â”‚                           â”‚
      â”‚  1. POST /login           â”‚                           â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
      â”‚  {username, password}     â”‚  2. éªŒè¯ç”¨æˆ·               â”‚
      â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
      â”‚                           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚  3. è¿”å› JWT Token        â”‚  3. ç”Ÿæˆ JWT              â”‚
      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
      â”‚  {token: "..."}           â”‚                           â”‚
      â”‚                           â”‚                           â”‚
      â”‚  4. è¯·æ±‚å—ä¿æŠ¤èµ„æº         â”‚                           â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
      â”‚  Header: Bearer <token>   â”‚  5. éªŒè¯ Token            â”‚
      â”‚                           â”‚                           â”‚
      â”‚  6. è¿”å›æ•°æ®              â”‚                           â”‚
      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
```

### å…¬å¼€ APIï¼ˆæ— éœ€è®¤è¯ï¼‰

- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- å•†å“åˆ—è¡¨å’Œè¯¦æƒ…
- å•†å“åˆ†ç±»æŸ¥è¯¢
- è½®æ’­å›¾æŸ¥è¯¢
- æ–‡ä»¶ä¸Šä¼ æ¥å£
- Swagger æ–‡æ¡£

## ğŸ’¼ æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

### è®¢å•çŠ¶æ€æµè½¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PENDING_PAY  â”‚  å¾…æ”¯ä»˜ï¼ˆåˆ›å»ºè®¢å•åï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ pay()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PENDING_SHIP â”‚  å¾…å‘è´§ï¼ˆæ”¯ä»˜åï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ship()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PENDING_RECEIVE  â”‚  å¾…æ”¶è´§ï¼ˆå‘è´§åï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ receive()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPLETED   â”‚  å·²å®Œæˆï¼ˆæ”¶è´§åï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     æˆ–

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PENDING_PAY  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ cancel()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CANCELED    â”‚  å·²å–æ¶ˆ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åº“å­˜ç®¡ç†

#### ä¸‹å•æ—¶æ‰£å‡åº“å­˜

```java
// åŸå­æ“ä½œï¼Œé˜²æ­¢è¶…å–
UPDATE product_table
SET stock = stock - ?
WHERE id = ? AND stock >= ? AND status = 1
```

#### å–æ¶ˆè®¢å•æ¢å¤åº“å­˜

```java
// è®¢å•å–æ¶ˆæ—¶æ¢å¤åº“å­˜
UPDATE product_table
SET stock = stock + ?
WHERE id = ?
```

### è´­ç‰©è½¦é€»è¾‘

- æ¯ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªè´­ç‰©è½¦ï¼ˆä¸€å¯¹ä¸€å…³ç³»ï¼‰
- é¦–æ¬¡æ·»åŠ å•†å“æ—¶è‡ªåŠ¨åˆ›å»ºè´­ç‰©è½¦
- æ·»åŠ å•†å“æ—¶æ£€æŸ¥åº“å­˜æ˜¯å¦å……è¶³
- æ”¯æŒä¿®æ”¹å•†å“æ•°é‡ã€åˆ é™¤å•†å“ã€æ¸…ç©ºè´­ç‰©è½¦
- ä¸‹å•åè‡ªåŠ¨æ¸…ç©ºè´­ç‰©è½¦

## ğŸ—‚ï¸ æ•°æ®åº“è®¾è®¡

### ä¸»è¦æ•°æ®è¡¨

| è¡¨å | è¯´æ˜ | ä¸»è¦å­—æ®µ |
|------|------|---------|
| `user_table` | ç”¨æˆ·è¡¨ | id, username, password_hash, role, status |
| `product_table` | è¯å“è¡¨ | id, name, category_id, price, stock, is_prescription |
| `category_table` | åˆ†ç±»è¡¨ | id, name, status, sort_order |
| `order_table` | è®¢å•è¡¨ | id, order_no, user_id, status, total_amount |
| `order_item_table` | è®¢å•æ˜ç»† | id, order_id, product_id, quantity, unit_price |
| `cart_table` | è´­ç‰©è½¦ | id, user_id |
| `cart_item_table` | è´­ç‰©è½¦æ¡ç›® | id, cart_id, product_id, quantity |
| `review_table` | è¯„ä»·è¡¨ | id, user_id, product_id, order_id, rating |
| `banner_table` | è½®æ’­å›¾ | id, title, image_url, status, sort_order |

### è¡¨å…³ç³»å›¾

```
user_table â”€â”€â”¬â”€â”€ cart_table â”€â”€â”€ cart_item_table â”€â”€â”€ product_table
             â”‚                                          â”‚
             â”œâ”€â”€ order_table â”€â”€â”€ order_item_table â”€â”€â”€â”€â”€â”€â”¤
             â”‚                                          â”‚
             â””â”€â”€ review_table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                                 category_table â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ API ç«¯ç‚¹

1. **åˆ›å»ºå®ä½“ç±»** (`domain/`)
2. **åˆ›å»º Mapper æ¥å£** (`mapper/`)
3. **åˆ›å»º MyBatis XML** (`resources/mapper/`)
4. **åˆ›å»º Service æ¥å£å’Œå®ç°** (`service/` å’Œ `service/impl/`)
5. **åˆ›å»º Controller** (`controller/`)
6. **æ·»åŠ  Swagger æ³¨è§£** (`@Operation`, `@Tag` ç­‰)

### æ·»åŠ æƒé™ä¿æŠ¤

ä½¿ç”¨ `AdminGuard` å·¥å…·ç±»ï¼š

```java
@GetMapping("/admin/users")
public ApiResponse<List<User>> listUsers() {
    // æ£€æŸ¥æ˜¯å¦ä¸ºç®¡ç†å‘˜
    AdminGuard.requireAdminUserId();

    // ä¸šåŠ¡é€»è¾‘
    return ApiResponse.success(userService.listUsers());
}
```

### è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†

```java
// æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸
throw new BizException("å•†å“åº“å­˜ä¸è¶³");

// å…¨å±€å¼‚å¸¸å¤„ç†å™¨ä¼šè‡ªåŠ¨æ•è·å¹¶è¿”å›ç»Ÿä¸€æ ¼å¼
```

### äº‹åŠ¡ç®¡ç†

åœ¨ Service æ–¹æ³•ä¸Šæ·»åŠ  `@Transactional` æ³¨è§£ï¼š

```java
@Transactional
public Order createOrder(CreateOrderRequest request) {
    // æ‰£å‡åº“å­˜ã€åˆ›å»ºè®¢å•ã€æ¸…ç©ºè´­ç‰©è½¦ç­‰æ“ä½œ
    // ä»»ä¸€æ­¥éª¤å¤±è´¥éƒ½ä¼šå›æ»š
}
```

## ğŸ“ é…ç½®è¯´æ˜

### application.yml ä¸»è¦é…ç½®é¡¹

```yaml
# æœåŠ¡å™¨ç«¯å£
server:
  port: 8080

# æ•°æ®åº“é…ç½®
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/medicine_sales
    username: root
    password: root

# JWT é…ç½®
jwt:
  secret: "your_secret_key"      # è‡³å°‘32ä½
  expire-seconds: 86400          # Tokenæœ‰æ•ˆæœŸ

# MyBatis é…ç½®
mybatis:
  mapper-locations: classpath:mapper/**/*.xml
  configuration:
    map-underscore-to-camel-case: true  # ä¸‹åˆ’çº¿è½¬é©¼å³°
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  # SQLæ—¥å¿—
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œå•å…ƒæµ‹è¯•

```bash
mvn test
```

### API æµ‹è¯•

æ¨èä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š
- **Swagger UI** - http://localhost:8080/swagger-ui.html
- **Postman** - å¯¼å…¥ API é›†åˆ
- **cURL** - å‘½ä»¤è¡Œæµ‹è¯•

## ğŸ“¦ éƒ¨ç½²

### æ‰“åŒ…

```bash
mvn clean package -DskipTests
```

ç”Ÿæˆçš„ JAR æ–‡ä»¶ä½äº `target/course-mgr-0.0.1-SNAPSHOT.jar`

### è¿è¡Œ

```bash
java -jar target/course-mgr-0.0.1-SNAPSHOT.jar
```

### Docker éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

åˆ›å»º `Dockerfile`ï¼š

```dockerfile
FROM openjdk:17-jdk-slim
WORKDIR /app
COPY target/course-mgr-0.0.1-SNAPSHOT.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

æ„å»ºå’Œè¿è¡Œï¼š

```bash
docker build -t medication-sales-system .
docker run -p 8080:8080 medication-sales-system
```

## ğŸ”§ å¸¸è§é—®é¢˜

### 1. å¯åŠ¨æ—¶æ•°æ®åº“è¿æ¥å¤±è´¥

æ£€æŸ¥ `application.yml` ä¸­çš„æ•°æ®åº“é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ MySQL æœåŠ¡å·²å¯åŠ¨ã€‚

### 2. JWT Token æ— æ•ˆ

ç¡®ä¿ï¼š
- Token æ ¼å¼æ­£ç¡®ï¼ˆ`Bearer <token>`ï¼‰
- Token æœªè¿‡æœŸ
- `jwt.secret` é…ç½®æ­£ç¡®

### 3. è·¨åŸŸé—®é¢˜

é¡¹ç›®å·²é…ç½® CORSï¼Œå¦‚éœ€ä¿®æ”¹å…è®¸çš„åŸŸåï¼Œç¼–è¾‘ `config/CorsConfig.java`ã€‚

### 4. æ–‡ä»¶ä¸Šä¼ å¤±è´¥

ç¡®ä¿ `uploads/` ç›®å½•å­˜åœ¨ä¸”æœ‰å†™å…¥æƒé™ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue
- å‘é€é‚®ä»¶è‡³ï¼š[your-email@example.com]

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œè¯·å‹¿ç”¨äºå®é™…çš„åŒ»è¯é”€å”®ä¸šåŠ¡ã€‚å®é™…åŒ»è¯é”€å”®éœ€è¦éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å¹¶è·å¾—ç›¸åº”èµ„è´¨ã€‚
